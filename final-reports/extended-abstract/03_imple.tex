\section{Algorithmic Optimization in Architecture}
\label{sec: Methodology}

With the ability to quickly update a design, to generate the corresponding analytical model, and, finally, to automatically evaluate the design in an analytical tool, it becomes possible to implement automated optimization processes. We name these processes \ac{AO}.

\ac{AO} treats the analyses' results for different variations of the design as the functions to optimize, i.e., as the objective functions. These functions have a domain which corresponds to the range of acceptable designs as specified by the architect. Moreover, since we do not know their mathematical form, these objective functions are often treated as black- boxes, and, as a result, information about the their derivatives cannot be extracted. For this reason, methods depending on function derivatives cannot be used to address this problem. Instead, we use derivative-free (or black-box) algorithms, which can be divided into three distinct subclasses: direct-search, metaheuristics, and model-based \cite{Conn2009,Glover2003Metaheuristics,Koziel2011}.


In \cref{ssec:ad,ssec:aa}, we discussed how the architectural design paradigm has incrementally grown to develop the mechanisms to quickly (1) update a design, (2) generate the corresponding analytical model, and (3) automatically evaluate the design in an analytical tool.% and collect its results. 

These mechanisms laid down the foundations for automated optimization processes. By extending the Algorithmic Design (\ac{AD}) and Algorithmic Analysis (\ac{AA}) approaches to include optimization mechanisms, we are able to apply automatic optimization processes that aim to improve (or even optimize) designs' performance. 


\Cref{fig:algorithmicoptimization} illustrates a possible approach for introducing automated optimization processes in the architectural worfklow. In this approach, we introduce an optimizer component that is responsible for searching the design space and generating new values for the design's parameters. These values are then communicated to the \ac{AD} tool, which generates the analytical models and evaluates them in the corresponding analytical tools. After being evaluated, the analytical tools communicate the evaluations' results to the \ac{AD} tool, which, in turn, forwards them to the optimizer. Based on these results, the optimizer generates another set of values for the design's parameters and this process is repeated until a stopping criterion (e.g., evaluations or time limit, solution's quality) is met. The communications between each component are encoded within the \ac{AD} tool, therefore incurring no additional efforts for the architect.

\begin{figure}[htbp]
	\centering
	\includegraphics[width=\columnwidth]{../report/Images/Solution/algorithmic_optimization.png}
	\caption[Algorithmic Optimization workflow]{Algorithmic Optimization workflow. In this workflow, the architect only interacts with an \ac{AD} tool to create the initial design, to specify the analysis tools, and to specify the optimization parameters.}
	\label{fig:algorithmicoptimization}
\end{figure}

In order to benefit from the \ac{AO} approach, we combine the optimization framework developed in this dissertation with an \ac{AD} tool to provide an alternative to easily address a wide variety of \ac{BPO} problems. To this end, architects are required to: (1) create the \ac{AD} model reflecting their design's intents; (2) select the performance aspects to optimize and, thus, the analysis tools to be used (e.g., lighting, thermal, structural, costs), and, finally, (3) to select, if necessary, the parameters of the optimization process (e.g., algorithm, algorithm's parameters).


Even though the provided example presents a textual-based \ac{AO} approach, the developed optimization framework can easily be integrated within a visual \ac{AD} tool, like Grasshopper. 

One important aspect that results from this combination is the fact that architects are able to use different optimization algorithms and, consequently, to select an optimization algorithm that better suits their problems. To bridge the gap between the lack of knowledge or experience and the suitability of optimization algorithms for each problem, the optimization framework also provides automated testing mechanisms. These mechanisms enable the sequential execution of multiple optimization algorithms for a specified amount of evaluations, as well as each algorithm's performance measures. This feature is particularly important in the architectural context~\cite{Wortmann2016BBO,Hamdy2016}, as it promotes more informed decisions towards the selection of more appropriate optimization algorithms.


Due to the visual nature of architects and the generalized lack of confidence in optimization processes, the visualization of evaluated design solutions is of great importance, as it allows architects to explore and corroborate the optimization results. To this end, the optimization framework provides post-processing and visual mechanisms (see \cref{fig:postprocessing}) that, when combined with an \ac{AD} tool, allow the architect to click on the evaluated solutions and instantly visualize the corresponding design in a 3D modeling tool. 

These visual mechanisms also promote a better comprehension of the optimization process, as they allow architects to explore and visualize the results of the optimization, in real-time, to get a clearer perspective. Besides reasoning and creating logical patterns that allow them to explain the obtained results, architects can also learn more about their designs' behavior regarding different performance aspects and, potentially, about the optimization algorithm itself.

Finally, visualization and processing mechanisms can also be useful not only to detect errors or incoherences (e.g., in the optimization model) early in the optimization process, but also to reduce the overall optimization time, i.e.,  provide the architect with enough information to stop the optimization process sooner. For some problems, obtaining an optimum is not strictly necessary. Instead, a close to optimal or good solution suffices. Having a framework which interactively updates the information about the optimization process is particularly useful for those problems, since the user can explore and visualize the already evaluated candidate solutions and decide whether one of them suffices, even if it is not an optimum. 
